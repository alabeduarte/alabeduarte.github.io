{"componentChunkName":"component---src-templates-blog-post-js","path":"/tdd/","result":{"data":{"site":{"siteMetadata":{"title":"Alabê's Blog"}},"markdownRemark":{"id":"fa612ea4-3508-52fe-8587-9fcee6e6a3cc","excerpt":"What is TDD? TDD stands for Test-Driven Development and it is a Software\nDevelopment’s process that was credited to Kent\nBeck.  The idea consists of writing…","html":"<p>What is TDD? TDD stands for Test-Driven Development and it is a Software\nDevelopment’s process that was credited to <a href=\"https://www.kentbeck.com/\">Kent\nBeck</a>.  The idea consists of writing unit tests for\nyour program, making them fail, then introducing the minimum amount of code that\nis enough to make the test pass, then you continue writing more tests according\nto your requirements at hand. By having tests in place, any change you do on\nyour main code (let’s call it production code from now) can be checked against\nthose tests and running them for every new change can be a way to get faster\nfeedback, as an alternative to boot your application (whatever that is), run by\neach scenario and check if things are working as expected.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/98aa19d5bc7b830b8b483512c6e404c4/f3c07/traditional-approach.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.60759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB/klEQVQoz02R20vTYRjH3+WpwnTFyukK7a4iumqLDkLW8lAXSUppiWKlFKGgNuc27cLM0k0WzENrGBU5yS276Q8oyjLqItc0KYoiik6CFxXUzadnP9fqhQ/v830O8PB91InBO1hOB8hvu8IOYWvrMNvtw5reJvHm5ssJzE2X2BLH3OTXcpaWAJsah6jqG+fnr9+oDfU+sit7MAo5h3vJONCF6YibNVVu9GXnUDvtQhuqQLB2oHafWcDavpCLkW8j82A3777Mo0wNPnKaBxMYROe1+lndMoSh0UfKMTepdR6SanrJLrexrqJBY2V5G0m1HtKklnzUzdKK80TefEKtnbyHYT6C8eszsr5NYZybYlUsFoyiTXMRcn9EWfL0MaMdGyGgwK/oaS8gbTZC3vfnZMvM8nY/0ZcfZcP+IOk3wuivh8nUCCX+jBjXQuhHwqR4gxyqK6PfbmHAZqa4vprkwRArpJZ+dYyMk16ir2XDZfs7xSMHOqtLvImzy4lO/kWS02naRVKheLa3G1XqRe3zSNz1r17gZHFpJ5G3n1FZ1W4x2IEqEcOLZahEKHSRWnYWY42HzMoL5B6/yPpTA+TV9klNjlAk/UXOeL/M7XGgFw+1ozx59YGRuxFCD6YZux9NENO3JmYIT0xz+9ELjfGHM9z8r+dvX1DmJ2ffE3t/AC9sdJsY8cAoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Traditional Approach\"\n        title=\"Traditional Approach\"\n        src=\"/static/98aa19d5bc7b830b8b483512c6e404c4/f058b/traditional-approach.png\"\n        srcset=\"/static/98aa19d5bc7b830b8b483512c6e404c4/c26ae/traditional-approach.png 158w,\n/static/98aa19d5bc7b830b8b483512c6e404c4/6bdcf/traditional-approach.png 315w,\n/static/98aa19d5bc7b830b8b483512c6e404c4/f058b/traditional-approach.png 630w,\n/static/98aa19d5bc7b830b8b483512c6e404c4/40601/traditional-approach.png 945w,\n/static/98aa19d5bc7b830b8b483512c6e404c4/78612/traditional-approach.png 1260w,\n/static/98aa19d5bc7b830b8b483512c6e404c4/f3c07/traditional-approach.png 2516w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/27084a2e42d15111216f1114342fb272/fb371/tdd-approach.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.24050632911392%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACN0lEQVQoz02Qa0gTUBiGz5YzyjIL/0UFFRVBBhmhpVKoIzOnJmG4pIu2NEp0zalMp+bEho0Ws6lkYpkp5QWXmKVmLtOi+uEFTHShoP2SCCLoQj0dragfD+e873m/73zniInZeZJtrRwubiDO0kh8aROR+bcJMd5kn2Rv9gI1BBtqCDLcWPTDcmoJ/UNYbu2iDpH0j04j2obG2XD6KhtT7WxPr2BrmoNlRywItQkRVfCbg/n/9n/1/xyS3v4crM0DiOsdL6VpwjexDN9jZaw8akEVV4TQFLH2pI11J8rZrLtGQEYlgZlVrE4sRcQUoowtRrmwagpRxZcgwnPR13QhnJ2v5TSXJPKW8DxEtDyMlkURJpRRZkScFe8YC14HC1BpSha1iJRTRcoXaGQu2oJSLXWYEWNdN6Kua4jAZB1+F+2IjAo2abPZlWZgicGJ4oyNPUlnWZ8pC/WV+GrNhKSex0cvsxccbNPqCUg3osqpQiRZMNY8Qjzu7sDj8CH4oxuv9+8oMat51hnKGuZY/tTNZN5Ssjw2FD8+EOEwM1vtz85PL/CamaTCFMTDnihWMY93czOZdpdsOPSG2NQ4/C47EZZb7DiuQ52VgsJWj8h2EpukYUuR/JIrjfin5JOgS2CFtRpRXMdu7SkOGNJQ2BsR58qxNrkRX77/pOXVHC29ozzoG+He4BQNbg/tvSO4+se4MzjD/b63uHqHaR2YoH5gmrYnY7hktmnQw133FO09w3Q+H+fz12/8AqGSdPz12M2qAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TDD Approach\"\n        title=\"TDD Approach\"\n        src=\"/static/27084a2e42d15111216f1114342fb272/f058b/tdd-approach.png\"\n        srcset=\"/static/27084a2e42d15111216f1114342fb272/c26ae/tdd-approach.png 158w,\n/static/27084a2e42d15111216f1114342fb272/6bdcf/tdd-approach.png 315w,\n/static/27084a2e42d15111216f1114342fb272/f058b/tdd-approach.png 630w,\n/static/27084a2e42d15111216f1114342fb272/40601/tdd-approach.png 945w,\n/static/27084a2e42d15111216f1114342fb272/78612/tdd-approach.png 1260w,\n/static/27084a2e42d15111216f1114342fb272/fb371/tdd-approach.png 2512w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>My journey</h2>\n<p>TDD (Test-Driven Development) is one of many techniques for developing software\nand this article aims to share my personal experience with it. I hope that I can\nclarify my thoughts on <strong>when I believe it can help</strong> and when I believe we\nshould take a step back. I need to say that <strong>I found TDD pretty difficult and\nabstract at first</strong>. There will always be a space for discussion and that’s why\nother processes such as pair-programming and code review are extremely\ncomplementary to what I consider healthy software development processes. Let me\ngive you some context before I start, so then you can understand better where I\ncame from.</p>\n<p>I’ve started reading about TDD on the internet and what helped me the most in my\nfirst steps were the articles from the <a href=\"https://www.caelum.com.br\">Caelum</a>\nwebsite. I found really nice examples of how to do it at the time through their\narticles and further I found <a href=\"https://alabeduarte.com/\">books</a> which led me to\nthe formal definitions written by Kent Beck. Then I joined\n<a href=\"https://www.thoughtworks.com\">ThoughtWorks</a> in 2011 and there I believe it was\na turning point for me. ThoughtWorks is famous for its revolutionary mindset\n(look for <a href=\"https://agilemanifesto.org\">the agile manifesto</a>), the <a href=\"https://www.thoughtworks.com/radar\">Tech\nRadar</a> publications and for caring about\ncode quality. However, the reason I believe working there was so important was\nbecause of the people that I had a chance to work with at the time. They really\nencouraged me to challenge the current state of the code and how it could be\nimproved. We also had a strong pair-programming culture which combined with\nwriting tests, challenging code maintainability became pretty natural.</p>\n<h2>Why do I believe TDD is important?</h2>\n<h3>Test-Driven Development enables refactoring.</h3>\n<p>As I mentioned above, having tests that exercise your code’s intention (function\nor method) opens room for refactoring the code with stronger confidence. You can\nmove stuff around, you can rename things that express better what you are trying\nto do, you can add an argument to a function or you can remove them all. If\nafter all of that you run your tests and they pass, chances are that you’ve done\neverything right! The opposite is true as well. If you change things and after\nrunning the tests some of them fail, it could be a sign that you’ve done\nsomething wrong and needs to be fixed. While refactoring the code, if you notice\nthat one single change affects multiple tests, it could be a sign that the\ncoupling between components is high or the scope of the change/refactor is big.</p>\n<p>With time, <strong>I learned that TDD is not about testing first necessarily</strong>. The\nprocess of writing tests first, seeing them fail to then make them pass to be\nable to refactor really helps but the key factor to me was let the tests drive\nhow I think so that my scope of changes can be expressed in the tests. I might\nwant to refactor something, but if my scenarios are pretty small, I can postpone\nthis decision for later.</p>\n<h3>Test-Driven Development favours design</h3>\n<p>TDD is all about letting your tests guide you about the problem you need to\nsolve. It is pretty common to use the baby steps terminology here. Basically,\nyou will start with really small and basic scenarios (for a given input, I\nexpect this output). With that in mind, your code design should be simple enough\nto satisfy the requirements. Another aspect that can contribute to better design\nis that your test is the first consumer of your code. There you will call the\nfunction that you carefully named and thoroughly added certain arguments and you\nwill see if that really expresses what you want to do. You may ask: “Should I\nreally pass 4 arguments in here?” “Is this name good?” “Isn’t too complicated to\nset up the initial state for just testing if this does what it needs to do?” If\nthe answer to this question doesn’t feel quite right, you can use this\nopportunity to change your code and look at your unit tests again and imagine:\n“how will someone call this code in real life? Is it easy to read?”.</p>\n<p>Sometimes, “For a given input, I expect this output” is not possible.  You could\nargue that it is not that simple as sometimes it is not easy to structure input\nand expected output. However, The fact that might not be possible all times\ndoesn’t change the fact that you can always think about it and make it as an\nexercise. Challenge yourself often and see if this is really the case. If not,\ntry breaking down your code into smaller components and then ask this question\nagain.</p>\n<h3>Good code design is pretty subjective!</h3>\n<p>YES! That is it! If I’m coding all by myself I’m pretty sure I’ll understand it\nall and every decision will make sense until I have to explain to someone.\nThat’s how pair programming and/or code review becomes crucial here. The process\nof doing TDD evolves empathy as well. I tend to think that we need to solve some\nproblems right away, but often when I share my thoughts with someone I realise\nthat I’m thinking too far ahead. Conversations like that can help you to avoid\noverengineering and make decisions prematurely. As we know by now, our tests are\nthe first consumers of our code, so lean on that and discuss with your peers\nwhether this is really a good design. Here are some questions that I often try\nto ask myself:</p>\n<ul>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Is my code easy to maintain?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Is my code easy to change?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Is my code easy to read?</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" checked disabled> Is my code expressive enough?</li>\n</ul>\n<h3>TDD doesn’t mean bug-free code!</h3>\n<p>I’ve heard an argument before saying that if you’re doing TDD, your code\nshouldn’t have bugs. Well, I believe this is a bold statement. Of course, my\ncode can have bugs. Test-Driven Development is a technique that requires\ndiscipline and experience. If I don’t follow the steps, for example, if I never\nsee my tests failing, I can fall into the false positive trap. It is crucial to\nwrite a test, see it fail, then make it pass! The tests should also be reliable.\nIs part of the good design I mentioned above that our tests are also easy to\nread and maintain. They should be predictable and clean. If there are too many\ndependencies or setups, it could be a sign that my code is too coupled,\ntherefore, it will be hard to maintain and false positives can be introduced.\nBesides, at this stage, you could argue if having tests is really adding value\ngiven the amount of setup that it might require if you come to that point.</p>\n<p>There is another aspect to it, which is: we still can write tons of unit tests\nfollowing all the rules, but with the wrong assumptions. If we don’t understand\nthe problem we are trying to solve, we will end up having tests that will\nexercise something that doesn’t make sense with tests passing.</p>\n<h3>Tooling</h3>\n<p>In the previous sections, I’ve described techniques, beliefs and discipline. To\nmake it stick and be pleasant, we need to have good tooling. The tests should be\nfast to run. It should be quicker to run a test than open the application (i.e.\nbrowser or mobile device) myself and test it out. While coding, it should be\nquick to trigger the tests as well. Nowadays, most programming languages’\necosystems contain some tool where it watches your code and whenever you save a\nfile, the tests relevant to that file will run. That is the sweet spot, in my\nopinion.</p>\n<h3>Final thoughts and when doing TDD doesn’t help</h3>\n<p>I believe that Test-Driven Development doesn’t help when we are not quite\ncertain about what to do and what to expect. Sometimes, you might not be\nfamiliar with the language, framework or platform and you might need some time\nto play around with the available APIs and see what it is possible and what can\nbe a constraint.</p>\n<p>As the expected outcome might be unknown, having the development guided by tests\ncan be extremely difficult since TDD is all about defining the expectations and\nfiguring out how to meet them. So what usually works well for me is to do quick\nexperiments, writing code with no tests at all, see what can be done, explore\nthe limits of the tool/platform/API and then restart with TDD mindset using the\nexperiments as a reference/documentation. After that, I can safely throw the\nexperiment away and continue with the new code.</p>\n<p>Of course, this might not work for everyone, but as I mentioned a few times, it\nis all about the exercise. If you try to do that, you might learn a thing or two\nand next time you will perform better. All I want is the short feedback and the\nability to iterate over my understanding of the problem at hand often.</p>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://agilemanifesto.org\">Agile Manifesto</a></li>\n<li><a href=\"https://www.amazon.com.au/Test-Driven-Development-Kent-Beck/dp/0321146530\">Test-Driven Development by\nExample</a></li>\n<li><a href=\"https://www.amazon.com.au/Growing-Object-Oriented-Software-Guided-Tests/dp/0321503627\">Growing Object-Oriented Software, Guided by\nTests</a></li>\n<li><a href=\"https://www.amazon.com/Test-Driven-Development-Teste-Design-Portuguese-ebook/dp/B00WKMN24W\">Test-Driven Development: Teste e Design no Mundo Real (Portuguese\nEdition)</a></li>\n</ul>","frontmatter":{"title":"TDD (Test-Driven Development) - My personal journey","date":"January 01, 2021","description":"My personal exposure with TDD over the years."}},"previous":{"fields":{"slug":"/this-blog/"},"frontmatter":{"title":"This Blog"}},"next":{"fields":{"slug":"/new-laptop-setup/"},"frontmatter":{"title":"Setting up a new machine"}}},"pageContext":{"id":"fa612ea4-3508-52fe-8587-9fcee6e6a3cc","previousPostId":"b06a3354-8dfe-5aaa-a519-c098cc499448","nextPostId":"da14bab7-d633-56f1-88fd-8cfc8c964e39"}},"staticQueryHashes":["2841359383","916993862"]}
{"componentChunkName":"component---src-templates-blog-post-js","path":"/3-approaches-conditional-rendering-react/","result":{"data":{"site":{"siteMetadata":{"title":"Alabê's Blog"}},"markdownRemark":{"id":"7359eaf8-1caf-59ad-9b9e-a02549d40a95","excerpt":"In this post, I’d like to share alternative approaches for dealing with\nconditional rendering in\nReact. I will try to list out the pros and cons about…","html":"<p>In this post, I’d like to share alternative approaches for dealing with\n<a href=\"https://reactjs.org/docs/conditional-rendering.html\">conditional rendering</a> in\n<a href=\"https://reactjs.org/\">React</a>. I will try to list out the pros and cons about 3\ndifferent approaches (doesn’t mean couldn’t be more!) and hopefully this can be\nuseful for you someday.</p>\n<h2>Use-case</h2>\n<p>Let’s consider we have a React component that is called <code class=\"language-text\">AccountCard</code>. The\nresponsibility of this component is to display the user’s first name, last name and\nthe avatar.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2929574b839204879d75b55434212841/5fada/user-card.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDUlEQVQoz52QC2uEMBCE/f//7igH0tP6fp49PU0Meeg0G09pr7SFBoZdluTbyXjrukIbBbPoTUZDKfUvEcvTFnBtRrQVR1MyvLccWmssy2LhxvUkekCVZtRLKb9UIYTrPbMopAFH+GKsFPLAgHGGvu/BOXeX6DItoJ7ZGTl5PrToAGYhQ3TWeDsrFKHGrb8hSVIURYGqquD7PhibME4TkjRzC+gQeIeT+wOYXCYEJ43LSSJ9pTwk4jhGWZboug5RFFkgw/0+IssLSPvFX4AaVTYhDyWyQKDJtoDrunaAYRicU3JF8/bauYc/ArfA5SOJ9aG/zw777tCGSeGTAzGLrVrN83zUvf88fxbNifUBU+Ns/pnmDuUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"User Card\"\n        title=\"User Card\"\n        src=\"/static/2929574b839204879d75b55434212841/f058b/user-card.png\"\n        srcset=\"/static/2929574b839204879d75b55434212841/c26ae/user-card.png 158w,\n/static/2929574b839204879d75b55434212841/6bdcf/user-card.png 315w,\n/static/2929574b839204879d75b55434212841/f058b/user-card.png 630w,\n/static/2929574b839204879d75b55434212841/40601/user-card.png 945w,\n/static/2929574b839204879d75b55434212841/78612/user-card.png 1260w,\n/static/2929574b839204879d75b55434212841/5fada/user-card.png 1706w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  avatarURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> AccountCard<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatarURL<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>First name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>Last name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// usage</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token operator\">&lt;</span>Account\n  firstName<span class=\"token operator\">=</span><span class=\"token string\">\"John\"</span>\n  lastName<span class=\"token operator\">=</span><span class=\"token string\">\"Doe\"</span>\n  avatarURL<span class=\"token operator\">=</span><span class=\"token string\">\"https:/example.com/slug-123.png\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h2>New requirements</h2>\n<p>Let’s imagine we’ve got a new requirement:</p>\n<blockquote>\n<p><em>Premium Accounts</em> should have a small badge indicating that the account is\n<em>premium</em>.  As for <em>regular</em> accounts, the user card should stay the same.</p>\n</blockquote>\n<table>\n<thead>\n<tr>\n<th align=\"center\">Regular Account</th>\n<th align=\"center\">Premium Account</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2929574b839204879d75b55434212841/5fada/user-card.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41.139240506329116%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABDUlEQVQoz52QC2uEMBCE/f//7igH0tP6fp49PU0Meeg0G09pr7SFBoZdluTbyXjrukIbBbPoTUZDKfUvEcvTFnBtRrQVR1MyvLccWmssy2LhxvUkekCVZtRLKb9UIYTrPbMopAFH+GKsFPLAgHGGvu/BOXeX6DItoJ7ZGTl5PrToAGYhQ3TWeDsrFKHGrb8hSVIURYGqquD7PhibME4TkjRzC+gQeIeT+wOYXCYEJ43LSSJ9pTwk4jhGWZboug5RFFkgw/0+IssLSPvFX4AaVTYhDyWyQKDJtoDrunaAYRicU3JF8/bauYc/ArfA5SOJ9aG/zw777tCGSeGTAzGLrVrN83zUvf88fxbNifUBU+Ns/pnmDuUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Account Card\"\n        title=\"Account Card\"\n        src=\"/static/2929574b839204879d75b55434212841/f058b/user-card.png\"\n        srcset=\"/static/2929574b839204879d75b55434212841/c26ae/user-card.png 158w,\n/static/2929574b839204879d75b55434212841/6bdcf/user-card.png 315w,\n/static/2929574b839204879d75b55434212841/f058b/user-card.png 630w,\n/static/2929574b839204879d75b55434212841/40601/user-card.png 945w,\n/static/2929574b839204879d75b55434212841/78612/user-card.png 1260w,\n/static/2929574b839204879d75b55434212841/5fada/user-card.png 1706w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></td>\n<td align=\"center\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c8ba7a3dbaafb87d452a3dcedc972bda/2aa89/user-card-premium.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.405063291139236%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABUElEQVQoz4VSy1LDMAzsn/MZHPgOTgx8ACegHdKWPknSJqHJJLHT+JlFttvC9ACe0UhjyeuVViNjDLRRsFbDODMaSilIKb2/jv8yay1Gfd8j3TZINx2SNcdX1lHCwB1XMAyDN/fAfX6OL5+cvMMRQmDkEqv3DquJwcerQhFb1HWFNE3BWoayLFEUhQfvjkccysoDXx9357AIUGA97bB511iMJYpEo20bLJcrD5ZlGcVLX1w31MluT4z0BWhQHbWiaWwEGBgKLCYMizeF+YvEfqvBOcNsOkOe50iSBFEU+eLDocRnnEDrAKjyMWR0Bx0/0t2FIbHa9cRMIY8lmsoQA0ksW//QzYUxFlqiWXH+M2M+vkf9dAP+fAvdM8rrIIqQfVCZ1HaKOyA3M+evYwfsxdAWihcQ8QNUNSdRRBDlPMygmPq1Kv+viaI2lR6CndbmG2LhaRrBtkw5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Premium Account Card\"\n        title=\"Premium Account Card\"\n        src=\"/static/c8ba7a3dbaafb87d452a3dcedc972bda/f058b/user-card-premium.png\"\n        srcset=\"/static/c8ba7a3dbaafb87d452a3dcedc972bda/c26ae/user-card-premium.png 158w,\n/static/c8ba7a3dbaafb87d452a3dcedc972bda/6bdcf/user-card-premium.png 315w,\n/static/c8ba7a3dbaafb87d452a3dcedc972bda/f058b/user-card-premium.png 630w,\n/static/c8ba7a3dbaafb87d452a3dcedc972bda/40601/user-card-premium.png 945w,\n/static/c8ba7a3dbaafb87d452a3dcedc972bda/78612/user-card-premium.png 1260w,\n/static/c8ba7a3dbaafb87d452a3dcedc972bda/2aa89/user-card-premium.png 1698w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></td>\n</tr>\n</tbody>\n</table>\n<p>Basically, we need to add a new <em>badge</em> only if the user’s account is <em>premium</em>,\notherwise, we just render the component as it was before. It seems straightforward.</p>\n<p>To make things more interesting and to <strong>justify why I’m writing this post</strong>,\nI’d like to consider the possibility where <strong>the current component <code class=\"language-text\">&lt;AccountCard\n/&gt;</code> could be in use by other teams and different places in the app</strong>.</p>\n<p>With that said, in order to make the changes, we’ll need to make, we will need to\nconsider our strategy carefully since we don’t want to break compatibility with\nother teams/areas where this component is already being used.</p>\n<h2>Approaches</h2>\n<p>I can imagine 3 approaches (probably there are more) and I’ll try to reason\nabout the pros and cons of each one.</p>\n<h3>1. Adding a new prop with boolean values</h3>\n<p>Our goal is to display additional information on top of what is already\nthere, so one way to approach this is to add a new prop to our component that\nindicate that the account is <em>premium</em>. In this case, we can simply use a\n<code class=\"language-text\">boolean</code> value to indicate whether the account is <em>premium</em> or not:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Let's pretend we have a component that displays the \"premium\" badge</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PremiumBadge</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">PREMIUM</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  avatarURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  isPremium<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// new prop</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Account<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n  isPremium<span class=\"token punctuation\">,</span> <span class=\"token comment\">// new prop</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatarURL<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>First name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>Last name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* if the value of isPremium is true, display the Premium badge */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">{</span>isPremium <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">&lt;</span>PremiumBadge <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">}</span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// usage</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token operator\">&lt;</span>Account\n  firstName<span class=\"token operator\">=</span><span class=\"token string\">\"John\"</span>\n  lastName<span class=\"token operator\">=</span><span class=\"token string\">\"Doe\"</span>\n  avatarURL<span class=\"token operator\">=</span><span class=\"token string\">\"https:/example.com/slug-123.png\"</span>\n  isPremium<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h4>Pros</h4>\n<blockquote>\n<p>Easy</p>\n</blockquote>\n<p>It is an easy change that gets the job done. If there are no many people\ndepending on this component and the impact of doing changes is low, I’d consider\nthis approach in a heartbeat.</p>\n<h4>Cons</h4>\n<blockquote>\n<p>Our component will be subject to change every time we get a new requirement</p>\n</blockquote>\n<p>The example I gave earlier of having to display a <em>premium</em> badge is simple\nbecause either we show a new content or not.  However, software tends to evolve\nover time and I wouldn’t be surprised if we get to support new use cases in the\nfuture such as:</p>\n<ul>\n<li>display this icon when the user is online.</li>\n<li>display date of birth if a certain condition is met, etc.</li>\n</ul>\n<p>Then, every time we get a new requirement will be a new prop and a new “if”\ntucked in in the component and every change needs to be well considered given\nthere is now the risk of <strong>breaking the existing behaviour and impacting other\nteams</strong>.</p>\n<blockquote>\n<p>It can break compatibility with existing code</p>\n</blockquote>\n<p>If our component is being reused by other areas in the codebase, <strong>we will need\nto change everywhere</strong> to make sure the new prop is being passed correctly. We\nalso would need to watch out for regression.</p>\n<p>One way to mitigate the risk of breaking things or introducing breaking changes\nto other teams is to change the newly added prop to be set as <em>optional</em> and set\nits default value to be always <code class=\"language-text\">false</code> so that only the new usage of the code\nthat needs the new prop <code class=\"language-text\">isPremium</code> will need to change passing <code class=\"language-text\">false</code> or\n<code class=\"language-text\">true</code> while places where this component is already in use don’t need to change\na thing.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  avatarURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  isPremium<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// new prop now marked as \"optional\"</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Account<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n  isPremium <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// new prop</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n<span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>2. Adding a new prop with an enum</h3>\n<p>As mentioned above, adding new props for every new use case will increase the\nthe complexity of the component and it will require larger coordination between\ndevelopers that already use it.</p>\n<p>With that said, let’s try changing our data structure in a way that allows the\nusers of our code to pass down what type of <em>account</em> will be displayed and we\ncan write our component in a way that we will know what to do based on that.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// AccountType represents all possible types of account</span>\n<span class=\"token keyword\">enum</span> AccountType <span class=\"token punctuation\">{</span>\n  Regular<span class=\"token punctuation\">,</span>\n  Trial<span class=\"token punctuation\">,</span>\n  Premium<span class=\"token punctuation\">,</span>\n  Gold<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// accountTypeComponentMap takes an AccountType as input and returns a React</span>\n<span class=\"token comment\">// component based on the account type</span>\n<span class=\"token class-name\"><span class=\"token keyword\">const</span></span> accountTypeComponentMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  accountType<span class=\"token operator\">:</span> AccountType\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">[</span>AccountType<span class=\"token punctuation\">.</span>Regular<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// for \"regular\" accounts, display nothing</span>\n    <span class=\"token punctuation\">[</span>AccountType<span class=\"token punctuation\">.</span>Trial<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">TRIAL</span> <span class=\"token constant\">ACCOUNT</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>AccountType<span class=\"token punctuation\">.</span>Premium<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">PREMIUM</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">[</span>AccountType<span class=\"token punctuation\">.</span>Gold<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">GOLD</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// Fetch the component based on the account type</span>\n  <span class=\"token comment\">// return nothing (null) if can't find it.</span>\n  <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">[</span>accountType<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  avatarURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  accountType<span class=\"token operator\">:</span> AccountType<span class=\"token punctuation\">;</span> <span class=\"token comment\">// type that represents the account type (i.e.  premium, regular)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Account<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n  accountType<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Assign the corresponding component based on the account type</span>\n  <span class=\"token class-name\"><span class=\"token keyword\">const</span></span> BadgeComponent <span class=\"token operator\">=</span> <span class=\"token function\">accountTypeComponentMap</span><span class=\"token punctuation\">(</span>accountType<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatarURL<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>First name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n\n        <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>Last name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token comment\">/* displays the content */</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>BadgeComponent <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// usage</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token operator\">&lt;</span>Account\n  firstName<span class=\"token operator\">=</span><span class=\"token string\">\"John\"</span>\n  lastName<span class=\"token operator\">=</span><span class=\"token string\">\"Doe\"</span>\n  avatarURL<span class=\"token operator\">=</span><span class=\"token string\">\"https:/example.com/slug-123.png\"</span>\n  accountType<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>AccountType<span class=\"token punctuation\">.</span>Premium<span class=\"token punctuation\">}</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h4>Pros</h4>\n<blockquote>\n<p>Extensible</p>\n</blockquote>\n<p>This solution opens the possibilities to be able to accommodate new\nuse cases that are related to different types of accounts. As we have new\ntypes, all we have to do is to include in the list of supported types and add a\na new entry in the map, then add the corresponding rendering logic to it:</p>\n<p>i.e.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">enum</span> AccountType <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  Diamond<span class=\"token punctuation\">,</span> <span class=\"token comment\">// new type</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// accountTypeComponentMap takes an AccountType as input and returns a React</span>\n<span class=\"token comment\">// component based on the account type</span>\n<span class=\"token class-name\"><span class=\"token keyword\">const</span></span> accountTypeComponentMap <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n  accountType<span class=\"token operator\">:</span> AccountType\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> map <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// ...</span>\n    <span class=\"token punctuation\">[</span>AccountType<span class=\"token punctuation\">.</span>Diamond<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">// Fetch the component based on the account type</span>\n  <span class=\"token comment\">// return nothing (null) if can't find it.</span>\n  <span class=\"token keyword\">return</span> map<span class=\"token punctuation\">[</span>accountType<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h4>Cons</h4>\n<blockquote>\n<p>It can also break compatibility with existing code</p>\n</blockquote>\n<p>As we are adding a new prop, every consumer will need to update the code where\nthis component is being used to accommodate the <code class=\"language-text\">accountType</code>. Perhaps now the\nsituation can be trickier because other teams when updating the code, will also\nneed to know what would be the <em>default</em> account type to be used since depending\non what you pass in, it might render additional content.</p>\n<p>To mitigate that, we would need to make sure the documentation is in place and\nperhaps have a pre-selected <code class=\"language-text\">accountType</code> if none is given. However, having this\nimplicit might lead to confusion in the future so I’d choose this approach\ncarefully.</p>\n<p>i.e.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  accountType<span class=\"token operator\">?</span><span class=\"token operator\">:</span> AccountType<span class=\"token punctuation\">;</span> <span class=\"token comment\">// accountType now is optional</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Account<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n  accountType <span class=\"token operator\">=</span> AccountType<span class=\"token punctuation\">.</span>Regular<span class=\"token punctuation\">,</span> <span class=\"token comment\">// account type will always be \"regular\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>3. Using composition</h3>\n<p>The implementation of this approach consists of having separate components that\ncan be combined in order to achieve a broader “concept”.</p>\n<p>The idea is to extend basic components into more specific ones as needed so that\nthese components can be opted-in by developers as new features are introduced or\ntweaked. This principle is also called <a href=\"https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle#:~:text=In%20object%2Doriented%20programming%2C%20the,without%20modifying%20its%20source%20code.\">Open-closed\nprinciple</a>.\nTo illustrate this principle applied to our situation, our component is now\n<strong>closed for modification</strong>. Meaning that we don’t add new code, or at least we\nminimise the changes to it. However, we will now make it <strong>open for extension</strong>,\nmeaning that whenever new requirements come, we extend our component into\nsomething new based on the original one as we would do with <em>lego bricks</em>.</p>\n<p>Let’s see how our code would look like with this approach:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">AccountCardProps</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  firstName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  lastName<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  avatarURL<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> AccountCard<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/* replace &lt;div> by &lt;React.Fragment> */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatarURL<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>First name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n\n      <span class=\"token operator\">&lt;</span>label<span class=\"token operator\">></span>Last name<span class=\"token operator\">:</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>label<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> PremiumAccountCard<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>FunctionComponent<span class=\"token operator\">&lt;</span>AccountCardProps<span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  firstName<span class=\"token punctuation\">,</span>\n  lastName<span class=\"token punctuation\">,</span>\n  avatarURL<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>AccountCard\n      firstName<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>firstName<span class=\"token punctuation\">}</span>\n      lastName<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>lastName<span class=\"token punctuation\">}</span>\n      avatarURL<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>avatarURL<span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span><span class=\"token constant\">PREMIUM</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// usage</span>\n\n<span class=\"token comment\">// ...</span>\n\n<span class=\"token operator\">&lt;</span>PremiumAccountCard\n  firstName<span class=\"token operator\">=</span><span class=\"token string\">\"John\"</span>\n  lastName<span class=\"token operator\">=</span><span class=\"token string\">\"Doe\"</span>\n  avatarURL<span class=\"token operator\">=</span><span class=\"token string\">\"https:/example.com/slug-123.png\"</span>\n<span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\n<span class=\"token comment\">// ...</span></code></pre></div>\n<h4>Pros</h4>\n<blockquote>\n<p>Flexible</p>\n</blockquote>\n<p>This approach is arguable the most flexible of all, but it can also be\nconsidered as over-engineering. All depends on the problem at hand.</p>\n<p>Considering our use case, if the requirement is to just display a new badge when\nthe user’s account is <em>premium</em>, breaking the component into a separate\ncomponent might be too much. However, this approach can be really powerful\nbecause the original component doesn’t need to be changed necessarily,\ntherefore, the codebase won’t be affected as we evolve our software.</p>\n<h4>Cons</h4>\n<blockquote>\n<p>Risk of introducing the wrong abstraction</p>\n</blockquote>\n<p>Although I really like this approach, applying it too soon might hurt the code\ndesign since there is a risk of creating wrong abstractions for something we\ndon’t fully understand yet. If that happens, might be hard to go back to the\nsimplest state and there is a risk of the “composed” component become a hybrid\nbeast (generic, but specific, which is pretty much unfortunate, no one wants\nthat).</p>\n<p>More about that:</p>\n<ul>\n<li><a href=\"https://wiki.c2.com/?PrematureAbstraction\">Premature Abstraction</a></li>\n<li><a href=\"https://martinfowler.com/bliki/Yagni.html\">Yagni</a></li>\n</ul>\n<h2>Thank you for reading</h2>\n<p>If you read this far, I hope I didn’t waste your time.</p>\n<p>I’ve talked about 3 approaches that I often consider in situations like this and\nI don’t believe there is a right or wrong approach to follow but I thought would\nbe beneficial listing a few that came to mind here so it can be referenced later\non as a head start in the case you – <em>or future me</em> – face similar challenges.</p>\n<p>I hope you enjoy this post, if you have any feedback or questions, hit me up on\n<a href=\"mailto:alabeduarte@gmail.com\">alabeduarte@gmail.com</a>, I’d be happy to hear your thoughts and be better next\ntime!</p>","frontmatter":{"title":"3 approaches to consider when rendering conditional content in React","date":"February 19, 2021","description":" In this post, I'd like to share alternative approaches for dealing with conditional rendering in React. I will try to list out the pros and cons about 3 different approaches (doesn't mean couldn't be more!) and hopefully this can be useful for you someday. "}},"previous":{"fields":{"slug":"/multiple-git-config/"},"frontmatter":{"title":"Multiple .gitconfig files"}},"next":null},"pageContext":{"id":"7359eaf8-1caf-59ad-9b9e-a02549d40a95","previousPostId":"b4c300b4-32d8-53ff-a00f-d244e54d15e6","nextPostId":null}},"staticQueryHashes":["3347749741","3716405767"]}